{"version":3,"file":"index.browser.js","sources":["../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/typeof.js","../node_modules/@babel/runtime/helpers/regeneratorRuntime.js","../node_modules/@babel/runtime/regenerator/index.js","../node_modules/js-cookie/dist/js.cookie.mjs","../src/config.ts","../src/networking/ApiRequest.ts","../src/networking/ApiManager.ts","../src/styles/popup.ts","../src/types/survey.ts","../src/types/events.ts","../src/utils/EventEmitter.ts","../src/index.ts","../src/helpers/getRoundedCornersInPx.ts"],"sourcesContent":["function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","export default function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nexport default function toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : String(i);\n}","import _typeof from \"./typeof.js\";\nexport default function toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import toPropertyKey from \"./toPropertyKey.js\";\nexport default function _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","const urls = {\n    popupIframe: 'https://surveys.usequalli.com/surveys/popup',\n    api: 'https://api.usequalli.com/api/',\n\n    // popupIframe: 'http://localhost:3001/surveys/popup',\n    // api: 'http://localhost:8080/api/',\n};\n\nexport {urls};\n","interface Props {\n    apiKey: string;\n    url: string;\n    method: 'GET' | 'POST';\n    headers?: {};\n    body?: {};\n}\n\nconst ApiRequest = async (props: Props) => {\n    const {apiKey, url, method, headers, body} = props;\n    const deviceMetaData = {};\n\n    try {\n        const options = {\n            method,\n            headers: {\n                Authorization: `Bearer ${apiKey}`,\n                'Content-Type': 'application/json',\n                platform: 'web',\n                ...headers,\n            },\n            body: body\n                ? JSON.stringify({...body, event_metadata: deviceMetaData})\n                : JSON.stringify({event_metadata: deviceMetaData}),\n        };\n\n        const response = await fetch(url, options);\n\n        if (!response.ok) {\n            throw new Error(`API request failed: ${response.statusText}`);\n        }\n\n        const jsonResponse = await response.json();\n        return jsonResponse;\n    } catch (error: any) {\n        console.error(`API request error: ${error.message}`);\n        throw error;\n    }\n};\n\nexport default ApiRequest;\n","import {urls} from '../config';\nimport type {SurveyActions} from '../types';\nimport apiRequest from './ApiRequest';\n\nconst API_BASE_PATH = urls.api;\n\nconst ApiManager = {\n    identify: async (\n        apiKey: string,\n        userKey?: string,\n        userSessionKey?: string,\n    ) => {\n        const url = `${API_BASE_PATH}app-user/start-session`;\n        const headers: any = {};\n        if (userSessionKey) {\n            headers['user_key'] = userKey;\n        }\n        if (userSessionKey) {\n            headers['user_session_key'] = userSessionKey;\n        }\n\n        try {\n            const jsonResponse = await apiRequest({\n                apiKey,\n                url,\n                method: 'POST',\n                body: {},\n                headers,\n            });\n\n            if (jsonResponse.success) {\n                // logger('QUALLI: identify ', jsonResponse);\n                return jsonResponse;\n            }\n            console.error('QUALLI: Failed to identify user');\n        } catch (error) {\n            console.error('QUALLI: Failed to identify user: ', error);\n            return {success: false};\n        }\n    },\n\n    setUserAttributes: async (\n        apiKey: string,\n        userSessionKey: string,\n        attributes: any,\n    ) => {\n        if (Object.keys(attributes).length === 0) {\n            // logger('QUALLI: No attributes to send');\n            return;\n        }\n\n        const url = `${API_BASE_PATH}app-user/set-attributes`;\n\n        if (!userSessionKey) {\n            console.error('QUALLI: No session ID available');\n            return;\n        }\n        const headers = {'user-session-key': userSessionKey};\n\n        try {\n            await apiRequest({\n                apiKey,\n                url,\n                method: 'POST',\n                headers,\n                body: {attributes, timestamp: new Date()},\n            });\n            // logger('QUALLI: Successfully set user attributes');\n        } catch (error) {\n            console.error('QUALLI: Error setting user attributes: ', error);\n        }\n    },\n\n    performTrigger: async (\n        apiKey: string,\n        userSessionKey: string,\n        trigger: {name?: string; unique_id?: string},\n        url?: string,\n    ) => {\n        if (!trigger?.name && !trigger?.unique_id) {\n            // logger('QUALLI: Invalid trigger');\n            return;\n        }\n\n        const _url = `${API_BASE_PATH}app-user-events/trigger`;\n\n        if (!userSessionKey) {\n            console.error('QUALLI: No session ID available');\n            return;\n        }\n        const headers = {'user-session-key': userSessionKey};\n\n        try {\n            const jsonResponse = await apiRequest({\n                apiKey,\n                url: _url,\n                method: 'POST',\n                headers,\n                body: {trigger, url, timestamp: new Date()},\n            });\n\n            if (jsonResponse.success) {\n                // logger('QUALLI: Successfully performed trigger');\n                return jsonResponse;\n            }\n            console.error('QUALLI: Error performing trigger');\n        } catch (error) {\n            console.error('QUALLI: Error performing trigger: ', error);\n        }\n    },\n\n    trackScreen: async (\n        apiKey: string,\n        userSessionKey: string,\n        screen: {url: string},\n    ) => {\n        if (!screen?.url) {\n            // logger('QUALLI: Invalid trigger');\n            return;\n        }\n\n        const url = `${API_BASE_PATH}app-user-events/screen`;\n\n        if (!userSessionKey) {\n            console.error('QUALLI: No session ID available');\n            return;\n        }\n        const headers = {'user-session-key': userSessionKey};\n\n        try {\n            const jsonResponse = await apiRequest({\n                apiKey,\n                url,\n                method: 'POST',\n                headers,\n                body: {screen, timestamp: new Date()},\n            });\n\n            if (jsonResponse.success) {\n                // logger('QUALLI: Successfully performed trigger');\n                return jsonResponse;\n            }\n            console.error('QUALLI: Error performing track screen');\n        } catch (error) {\n            console.error('QUALLI: Error performing track screen: ', error);\n        }\n    },\n\n    logSurveyAction: async (\n        apiKey: string,\n        userSessionKey: string,\n        uniqueId: string,\n        action: SurveyActions,\n        data: {},\n    ) => {\n        const url = `${API_BASE_PATH}surveys/${uniqueId}/action`;\n\n        if (!userSessionKey) {\n            console.error('QUALLI: No session ID available');\n            return;\n        }\n        const headers = {'user-session-key': userSessionKey};\n\n        try {\n            await apiRequest({\n                apiKey,\n                url,\n                method: 'POST',\n                headers,\n                body: {action, data, timestamp: new Date()},\n            });\n            // logger('QUALLI: Successfully logged the survey action');\n        } catch (error: any) {\n            // logger(error?.response || '');\n            console.error('QUALLI: Error logging the survey action: ', error);\n        }\n    },\n\n    logEvent: async (\n        apiKey: string,\n        userSessionKey: string,\n        action: string,\n    ) => {\n        const url = `${API_BASE_PATH}app-user-events/store`;\n\n        if (!userSessionKey) {\n            console.error('QUALLI: No session ID available');\n            return;\n        }\n        const headers = {'user-session-key': userSessionKey};\n\n        try {\n            await apiRequest({\n                apiKey,\n                url,\n                method: 'POST',\n                headers,\n                body: {action, event_name: action, timestamp: new Date()},\n            });\n            // logger('QUALLI: Successfully logged the action');\n        } catch (error: any) {\n            // logger(error?.response || '');\n            console.error('QUALLI: Error logging the action: ', error);\n        }\n    },\n};\n\nexport default ApiManager;\n","// large screen styles\nconst largeScreenStyles = {\n    position: 'fixed',\n    width: '350px',\n    height: '250px',\n    bottom: '-100%',\n    'border-radius': '12px',\n    border: 'none',\n    opacity: 1,\n    transition: 'all 400ms ease-in-out',\n};\n\nconst largeScreenLeftStyles = {\n    left: '16px',\n};\n\nconst largeScreenCentertStyles = {\n    left: '50%',\n    transform: 'translate(-50%, 0)',\n};\n\nconst largeScreenRightStyles = {\n    right: '16px',\n};\n\n// Styles for smaller screens\nconst smallScreenStyles = {\n    position: 'fixed',\n    left: '16px',\n    right: '16px',\n    bottom: '-100%', // start off screen\n    width: 'calc(100% - 32px)',\n    height: '200px',\n    'border-radius': '12px',\n    border: 'none',\n    'max-height': '100%',\n    transition: 'all 400ms ease-in-out',\n};\n\nexport default {\n    styles: {\n        screens: {\n            large: largeScreenStyles,\n            small: smallScreenStyles,\n        },\n        popupPlacement: {\n            left: largeScreenLeftStyles,\n            center: largeScreenCentertStyles,\n            right: largeScreenRightStyles,\n        },\n        person: {\n            base: {\n                small: {\n                    position: 'fixed',\n                    opacity: 0,\n                    transition: 'all 400ms ease-in-out',\n                    cursor: 'pointer',\n                    bottom: '16px',\n                    background: 'none',\n                    overflow: 'hidden',\n                },\n                large: {\n                    position: 'fixed',\n                    opacity: 0,\n                    transition: 'all 400ms ease-in-out',\n                    cursor: 'pointer',\n                    bottom: '16px',\n                    background: 'none',\n                    overflow: 'hidden',\n                },\n            },\n            type: {\n                circle: {\n                    small: {\n                        width: '60px',\n                        height: '60px',\n                        'border-radius': '50%',\n                    },\n                    large: {\n                        width: '75px',\n                        height: '75px',\n                        'border-radius': '50%',\n                    },\n                },\n                rectangle: {\n                    small: {\n                        width: '60px',\n                        height: '90px',\n                        'border-radius': '6px',\n                    },\n                    large: {\n                        width: '60px',\n                        height: '90px',\n                        'border-radius': '6px',\n                    },\n                },\n            },\n            position: {\n                small: {\n                    bottom_left: {\n                        left: '16px',\n                    },\n                    bottom_center: {\n                        left: '50%',\n                        transform: 'translate(-50%, 0)',\n                    },\n                    bottom_right: {\n                        right: '16px',\n                    },\n                },\n                large: {\n                    bottom_left: {\n                        left: '16px',\n                    },\n                    bottom_center: {\n                        left: '50%',\n                        transform: 'translate(-50%, 0)',\n                    },\n                    bottom_right: {\n                        right: '16px',\n                    },\n                },\n            },\n        },\n    },\n};\n","export interface Survey {\n    unique_identifier: string;\n    slides: Array<\n        | InputSlide\n        | MultipleChoiceSlide\n        | StarSlide\n        | NumericSlide\n        | NPSSlide\n        | TextSlide\n    >;\n    person?: Person;\n    theme: SurveyTheme;\n    popup_placement?: SurveyPlacementTypes;\n    delay: number;\n}\n\n// DIFFERENT TYPES\nexport interface InputSlide extends Slide {\n    type: SlideType.input;\n    placeholder: string;\n    multiline?: boolean;\n}\n\nexport interface MultipleChoiceSlide extends Slide {\n    type: SlideType.multiplechoice;\n    multiple: true;\n    options: {label: string}[];\n}\n\nexport interface StarSlide extends Slide {\n    type: SlideType.star;\n}\n\nexport interface NumericSlide extends Slide {\n    type: SlideType.numeric;\n    min: number;\n    max: number;\n}\n\nexport interface TextSlide extends Slide {\n    type: SlideType.text;\n}\n\nexport interface NPSSlide extends Slide {\n    type: SlideType.nps;\n}\n\n// BASE\nexport interface Slide {\n    unique_identifier: string;\n    title: string;\n    subtitle?: string;\n    type: SlideType;\n    button_label?: string;\n}\n\nexport interface SurveyTheme {\n    unique_identifier: string;\n    name: string;\n    title_color: string;\n    subtitle_color: string;\n    answer_color: string;\n    button_color: string;\n    button_text_color: string;\n    background_color: string;\n    popup_border_color: string;\n    popup_border_width: number;\n    popup_rounded_corners: SurveyThemePopupRoundedCorners;\n}\n\nexport interface Person {\n    style: {\n        border_color: string;\n        border_width: number;\n        type: 'circle' | 'rectangle';\n    };\n    video_url: string;\n    logic: '1-step' | '2-step'; // 1-step: shows person and survey at once | 2-step: shows person first, then survey on click\n}\n\nexport interface Trigger {\n    unique_identifier: string;\n    scroll_depth: number | null;\n    unique_key: string | null;\n    css_selector: string | null;\n    inner_text: string | null;\n}\n\nexport enum SlideType {\n    'input' = 'input',\n    'multiplechoice' = 'multiplechoice',\n    'star' = 'star',\n    'numeric' = 'numeric',\n    'nps' = 'nps',\n    'text' = 'text',\n}\n\nexport enum SurveyActions {\n    SURVEY_SHOWN = 'survey_shown',\n    SURVEY_COMPLETED = 'survey_completed',\n    SURVEY_SKIPPED = 'survey_skipped',\n}\n\nexport enum SurveyPlacementTypes {\n    BOTTOM_LEFT = 'bottom_left',\n    BOTTOM_RIGHT = 'bottom_right',\n    BOTTOM_CENTER = 'bottom_center',\n}\n\nexport enum SurveyThemePopupRoundedCorners {\n    none = 'none',\n    small = 'small',\n    medium = 'medium',\n    large = 'large',\n}\n","export enum SurveyEvents {\n    SURVEY_COMPLETED = 'survey_completed',\n    SURVEY_SHOWN = 'survey_shown',\n    SURVEY_CLOSED = 'survey_closed',\n}\n\nexport interface EventCompletedPayload {\n    survey_unique_identifier: string;\n    answers: {\n        slide_unique_id: string;\n        slide_title: string;\n        answer: string | number | Array<string | number>;\n    }[];\n}\n\nexport interface EventShownPayload {\n    survey_unique_identifier: string;\n}\n\nexport interface EventClosedPayload {\n    survey_unique_identifier: string;\n}\n","import { SurveyEvents } from './../types/events';\n\nclass EventEmitter {\n    private events: { [key: string]: Function[] } = {};\n\n    on(event: SurveyEvents, listener: Function) {\n        if (!this.events[event]) {\n            this.events[event] = [];\n        }\n        this.events[event].push(listener);\n        return () => this.off(event, listener as Function);\n    }\n\n    off(event: SurveyEvents, listener: Function) {\n        if (!this.events[event]) return;\n        this.events[event] = this.events[event].filter(l => l !== listener);\n    }\n\n    emit(event: SurveyEvents, ...args: any[]) {\n        if (!this.events[event]) return;\n        this.events[event].forEach(listener => listener(...args));\n    }\n}\nconst eventEmitterInstance = new EventEmitter();\nexport { eventEmitterInstance as eventEmitter };\n","import Cookies from 'js-cookie';\nimport ApiManager from './networking/ApiManager';\nimport PopupStyles from './styles/popup';\nimport {\n    Survey,\n    SurveyThemePopupRoundedCorners,\n    QualliSDKInitOptions,\n    Person,\n    Trigger,\n} from './types/index';\nimport {SurveyEvents} from './types/events';\nimport mapPopupBorderRadiusToPx from './helpers/getRoundedCornersInPx';\nimport {urls} from './config';\nimport {eventEmitter} from './utils/EventEmitter';\n\nclass QualliSDK {\n    company: any = {};\n    ready = false;\n    _popupId = 'qualli-survey-popup-iframe';\n    _personId = 'qualli-survey-person';\n    _userSessionKey = '';\n    _userKey = '';\n    _apiKey = '';\n    _surveyToComplete?: Survey;\n    _popupInFrame = false;\n    _previousUrl = '';\n    _triggerQueue: {key?: string; uniqueId?: string}[] = [];\n    _attributesQueue: {[key: string]: string | number}[] = [];\n    _activeTriggers: Trigger[] = [];\n    _trackScreens = false;\n    _canTrackScrollDepthAgain = true;\n\n    constructor() {\n        this._handleIframeMessages = this._handleIframeMessages.bind(this);\n    }\n\n    async init(apiKey: string, options?: QualliSDKInitOptions) {\n        this._apiKey = apiKey;\n\n        await this.identify();\n        this.ready = true;\n\n        if (options?.trackScreens || !options) {\n            this._trackScreens = true;\n\n            this._trackScreenChange();\n        }\n\n        this._setupScreenTracking();\n\n        this._checkQueueAfterInit();\n    }\n\n    async identify() {\n        // check out cookies for a use session key\n        // if no key, create one\n        // save the key in cookies\n        let userKey = Cookies.get('qualli_user_key');\n        let userSessionKey = Cookies.get('qualli_user_session_key');\n\n        const response = await ApiManager.identify(\n            this._apiKey,\n            userKey,\n            userSessionKey,\n        );\n        if (\n            !response?.success ||\n            !response?.app_user_key ||\n            !response?.session_key\n        ) {\n            return;\n        }\n\n        Cookies.set('qualli_user_session_key', response.session_key);\n        Cookies.set('qualli_user_key', response.app_user_key);\n\n        this._userSessionKey = response.session_key;\n        this._userKey = response.app_user_key;\n        this.company = response.company_info;\n        this._activeTriggers = response.triggers;\n\n        this._setupActiveTriggerTracking();\n    }\n\n    async _checkQueueAfterInit() {\n        if (this._attributesQueue.length > 0) {\n            await Promise.all(\n                this._attributesQueue.map(async (attributes) => {\n                    await this.setAttributes(attributes);\n                }),\n            );\n        }\n\n        // see if we have any triggers to perform\n        if (this._triggerQueue.length > 0) {\n            this._triggerQueue.forEach(async (trigger) => {\n                if (trigger.key) {\n                    await this._performTrigger(trigger.key, null);\n                } else if (trigger.uniqueId) {\n                    await this._performTrigger(null, trigger.uniqueId);\n                }\n            });\n        }\n    }\n\n    async performTrigger(trigger: string) {\n        this._performTrigger(trigger, null);\n    }\n\n    async setAttributes(attributes: {[key: string]: string | number} = {}) {\n        // this should only be called if the init isn't done yet\n        if (!this.ready) {\n            this._attributesQueue.push(attributes);\n            return;\n        }\n\n        await ApiManager.setUserAttributes(\n            this._apiKey,\n            this._userSessionKey,\n            attributes,\n        );\n    }\n\n    reset() {\n        if (this._popupInFrame) {\n            this._closePopup();\n        }\n\n        // clear cookies\n        Cookies.remove('qualli_user_session_key');\n        Cookies.remove('qualli_user_key');\n\n        this.ready = false;\n        this._userSessionKey = '';\n        this._userKey = '';\n        this._surveyToComplete = undefined;\n        this._popupInFrame = false;\n        this._previousUrl = '';\n\n        // re-init\n        setTimeout(() => {\n            this.init(this._apiKey);\n        }, 1 * 1000);\n    }\n\n    on(event: SurveyEvents, listener: Function): () => void {\n        eventEmitter.on(event, listener);\n\n        // Return an unsubscribe function\n        return () => {\n            eventEmitter.off(event, listener);\n        };\n    }\n\n    _setupScreenTracking() {\n        const originalPushState = history.pushState;\n        const originalReplaceState = history.replaceState;\n\n        history.pushState = (...args) => {\n            originalPushState.apply(history, args);\n            this._trackScreenChange();\n        };\n\n        history.replaceState = (...args) => {\n            originalReplaceState.apply(history, args);\n            this._trackScreenChange();\n        };\n\n        window.addEventListener('popstate', () => {\n            this._trackScreenChange();\n        });\n    }\n\n    // key is the unique_key created by the user\n    // uniqueId is the unique_identifier created by Qualli\n    async _performTrigger(key: string | null, uniqueId: string | null) {\n        // this should only be called if the init isn't done yet\n        if (!this.ready) {\n            if (key) {\n                this._triggerQueue.push({key});\n            } else if (uniqueId) {\n                this._triggerQueue.push({uniqueId});\n            }\n            return;\n        }\n\n        let res: any;\n        if (key) {\n            res = await ApiManager.performTrigger(\n                this._apiKey,\n                this._userSessionKey,\n                {name: key},\n                window.location.href,\n            );\n        } else if (uniqueId) {\n            res = await ApiManager.performTrigger(\n                this._apiKey,\n                this._userSessionKey,\n                {unique_id: uniqueId},\n                window.location.href,\n            );\n        }\n\n        // if success -> see if we have any open surveys\n        if (res?.success) {\n            // see if we have any open surveys\n            const surveys = res?.data?.surveys?.data;\n\n            if (surveys?.length > 0) {\n                if (!this._popupInFrame) {\n                    // check if the survey has a delay set (in seconds)\n                    // the data will contain the timestamp of the last time the survey was shown in this format \"2024-01-23T16:50:13.830Z\"\n                    // if the timestamp is more than the delay, show the survey\n                    // if not -> queue the survey to be shown when the delay is over\n\n                    const delay = surveys[0]?.delay;\n\n                    if (delay) {\n                        this._handleSurveyDelay(\n                            surveys[0],\n                            res?.data?.timestamp as string,\n                        );\n                        return;\n                    }\n\n                    this._showPopup(surveys[0]);\n                    return;\n                }\n            }\n        }\n    }\n\n    async _trackScreenChange() {\n        // every new page the scroll depth should be tracked again\n        this._canTrackScrollDepthAgain = true;\n\n        if (!this._trackScreens) return;\n\n        const fulllURL = window.location.href;\n        // remove query params\n        const path = fulllURL.split('?')[0];\n\n        if (path === this._previousUrl) return;\n        this._previousUrl = path;\n\n        const res = await ApiManager.trackScreen(\n            this._apiKey,\n            this._userSessionKey,\n            {url: path},\n        );\n\n        // if success -> see if we have any open surveys\n        if (res?.success) {\n            // see if we have any open surveys\n            const surveys = res?.data?.surveys?.data;\n\n            if (surveys?.length > 0) {\n                if (!this._popupInFrame) {\n                    const delay = surveys[0]?.delay;\n\n                    if (delay) {\n                        this._handleSurveyDelay(\n                            surveys[0],\n                            res?.data?.timestamp as string,\n                        );\n                        return;\n                    }\n\n                    this._showPopup(surveys[0]);\n                    return;\n                }\n            }\n        }\n        // Implement your tracking logic here, e.g., send data to a server\n    }\n\n    _showPopup(survey: Survey) {\n        this._surveyToComplete = survey;\n        this._popupInFrame = true;\n        const islarge = window.innerWidth > 600;\n\n        const iframe = document.createElement('iframe');\n        const queryParams = {\n            survey_id: survey.unique_identifier,\n            popup: 'true',\n        };\n        const queryParmasString = Object.keys(queryParams)\n            // @ts-ignore-next-line\n            .map((key) => key + '=' + queryParams[key])\n            .join('&');\n\n        const placement = survey?.popup_placement || 'bottom_right';\n        const borderRadius = mapPopupBorderRadiusToPx(\n            survey.theme.popup_rounded_corners ||\n                SurveyThemePopupRoundedCorners.medium,\n        );\n        const borderColor = '#000000';\n        const borderWidth = survey.theme.popup_border_width + 'px' || 0 + 'px';\n\n        // Check screen size and apply styles\n        let popupPlacementHorizontalStyles: any =\n            PopupStyles.styles.popupPlacement.left;\n        if (placement === 'bottom_right') {\n            popupPlacementHorizontalStyles =\n                PopupStyles.styles.popupPlacement.right;\n        } else if (placement === 'bottom_center') {\n            popupPlacementHorizontalStyles =\n                PopupStyles.styles.popupPlacement.center;\n        }\n\n        const popupStyles = {};\n\n        if (!islarge) {\n            Object.assign(popupStyles, {\n                ...PopupStyles.styles.screens.small,\n            });\n        } else {\n            Object.assign(popupStyles, {\n                ...PopupStyles.styles.screens.large,\n                ...popupPlacementHorizontalStyles,\n            });\n        }\n\n        Object.assign(popupStyles, {\n            borderRadius: borderRadius,\n            borderColor: borderColor,\n            borderWidth: borderWidth,\n            backgroundColor: survey.theme.background_color,\n            border: 'solid',\n            zIndex: 999,\n        });\n\n        Object.assign(iframe.style, popupStyles);\n        iframe.src = `${urls.popupIframe}?${queryParmasString}`;\n        iframe.id = this._popupId; // An identifier for the iframe\n\n        // Append the iframe to the body\n        document.body.appendChild(iframe);\n\n        const person = survey?.person;\n\n        if (!!person && person.video_url) {\n            const show_survey = () => {\n                setTimeout(\n                    () => {\n                        if (person.style.type === 'circle') {\n                            iframe.style.bottom = '100px';\n                        } else {\n                            iframe.style.bottom = '115px';\n                        }\n                    },\n                    person.logic === '2-step' ? 0 : 800,\n                );\n            };\n\n            this._addPerson(person, show_survey, islarge, survey);\n        } else {\n            // start the animation immediately\n            // Start the animation\n            setTimeout(() => {\n                if (window.innerWidth < 600) {\n                    iframe.style.bottom = '16px';\n                } else {\n                    iframe.style.bottom = '24px';\n                }\n            }, 100);\n        }\n\n        // Event listener for messages from the iframe\n        window.addEventListener('message', this._handleIframeMessages, false);\n        this._emitSurvetShown(survey);\n    }\n\n    _emitSurvetShown(survey: Survey) {\n        eventEmitter.emit(SurveyEvents.SURVEY_SHOWN, {\n            survey_unique_identifier: this._surveyToComplete?.unique_identifier,\n        });\n    }\n\n    _handleSurveyDelay(survey: Survey, timestamp: string) {\n        // block from loading new surveys\n        this._surveyToComplete = survey;\n        this._popupInFrame = true;\n\n        const delayInSeconds = survey.delay;\n        // calculate the time with delay\n        const delayedTime = new Date(timestamp);\n        delayedTime.setSeconds(delayedTime.getSeconds() + delayInSeconds);\n\n        // run a timer to check if the delay is over\n        const interval = setInterval(() => {\n            const now = new Date();\n            if (now >= delayedTime) {\n                // delay is over -> show the survey\n                this._showPopup(survey);\n                clearInterval(interval);\n            }\n        }, 200);\n    }\n\n    _handleIframeMessages(event: any) {\n        // Ensure the message is from the expected source\n\n        if (!event?.data?.message) return;\n\n        const message = event.data.message;\n\n        if (message.type === 'close') {\n            this._closePopup();\n        }\n\n        if (message.type === 'ready') {\n            // send the survey data\n            this._postMessage('survey_to_complete', this._surveyToComplete);\n            this._postMessage('auth', {\n                userSessionKey: this._userSessionKey,\n                apiKey: this._apiKey,\n                companyPlan: this.company?.plan,\n            });\n        }\n\n        if (message.type === 'survey_completed') {\n            // this._closePopup();\n\n            eventEmitter.emit(SurveyEvents.SURVEY_COMPLETED, {\n                survey_unique_identifier: this._surveyToComplete\n                    ?.unique_identifier,\n                answers: message.data.answers,\n            });\n        }\n        if (message.type === 'survey_aborted') {\n            this._closePopup();\n        }\n\n        if (message.type === 'window_height_request') {\n            const height = message.data.height;\n            this._resizePopup(height);\n        }\n    }\n\n    _resizePopup(height: number) {\n        if (!isNaN(height)) {\n            const iframe = document.getElementById(this._popupId);\n\n            let totalHeight = height;\n\n            // if the popup has a border set, we should detract this from the total height\n            const borderWidth = iframe?.style?.borderWidth; // this is given as '2px' -> we need to remove the 'px' and parse it to an int\n            // create a regex checking if it is the correct format\n            const regex = new RegExp('^\\\\d+(px)?$');\n            if (borderWidth && regex.test(borderWidth)) {\n                totalHeight -= parseInt(borderWidth);\n            }\n\n            if (iframe) {\n                iframe.style.height = totalHeight + 'px';\n            }\n        }\n    }\n\n    _closePopup() {\n        this._popupInFrame = false;\n        window.removeEventListener('message', this._handleIframeMessages);\n        eventEmitter.emit(SurveyEvents.SURVEY_CLOSED, {\n            survey_unique_identifier: this._surveyToComplete?.unique_identifier,\n        });\n\n        const iframe = document.getElementById(this._popupId);\n        const person = document.getElementById(this._personId);\n\n        if (iframe) {\n            iframe.style.bottom = '-100%';\n            iframe.style.opacity = '0';\n\n            setTimeout(() => {\n                iframe.remove();\n            }, 1 * 1000); // wait long enough for the API calls to finish\n        }\n\n        if (person) {\n            person.style.opacity = '0';\n            person.remove();\n        }\n    }\n\n    _postMessage = (message: any, data?: any) => {\n        const iframe = document.getElementById(this._popupId);\n        if (iframe) {\n            // @ts-ignore\n            iframe.contentWindow.postMessage(\n                {\n                    message: {\n                        type: message,\n                        data,\n                    },\n                },\n                '*',\n            );\n        }\n    };\n\n    _addPerson(\n        person: Person,\n        showSurvey: () => void,\n        isLarge: boolean,\n        survey: Survey,\n    ) {\n        const personContainer = document.createElement('div');\n        const personVideo = document.createElement('video');\n        personVideo.src = person.video_url; // Assuming 'person' now has a 'video' property\n        personVideo.loop = true;\n        personVideo.muted = true;\n        personVideo.autoplay = true; // Ensure autoplay is enabled\n        personVideo.playsInline = true; // Ensure the video plays inline on mobile\n        personContainer.id = this._personId;\n\n        const personPositioningStyles = {};\n        const personTypeStyles = {};\n        const personBaseStyles = {};\n\n        // Positioning styles\n        let screenPositioningStyles = PopupStyles.styles.person.position.large;\n        if (!isLarge) {\n            screenPositioningStyles = PopupStyles.styles.person.position.small;\n        }\n\n        switch (survey.popup_placement || 'bottom_right') {\n            case 'bottom_left':\n                Object.assign(personPositioningStyles, {\n                    ...screenPositioningStyles.bottom_left,\n                });\n                break;\n            case 'bottom_center':\n                Object.assign(personPositioningStyles, {\n                    ...screenPositioningStyles.bottom_center,\n                });\n                break;\n            case 'bottom_right':\n                Object.assign(personPositioningStyles, {\n                    ...screenPositioningStyles.bottom_right,\n                });\n                break;\n        }\n\n        // Type styles\n        if (person.style.type === 'circle') {\n            Object.assign(personTypeStyles, {\n                ...PopupStyles.styles.person.type.circle.large,\n            });\n        } else {\n            Object.assign(personTypeStyles, {\n                ...PopupStyles.styles.person.type.rectangle.large,\n            });\n        }\n\n        // Base styles\n        Object.assign(personBaseStyles, {\n            ...PopupStyles.styles.person.base.large,\n        });\n\n        // Apply combined styles to the container\n        Object.assign(personContainer.style, {\n            ...personBaseStyles,\n            ...personTypeStyles,\n            ...personPositioningStyles,\n            border: `solid ${person.style.border_width}px ${person.style.border_color}`,\n        });\n\n        // Video styles to cover the container\n        personVideo.style.width = '100%';\n        personVideo.style.height = '100%';\n        personVideo.style.objectFit = 'cover';\n\n        // Logic for showing the survey\n        if (person.logic === '2-step') {\n            personContainer.onclick = showSurvey;\n        }\n\n        // Append the video to the container and the container to the body\n        document.body.appendChild(personContainer);\n        personContainer.appendChild(personVideo);\n\n        // Fade in the container\n        setTimeout(() => {\n            personContainer.style.opacity = '1';\n\n            if (person.logic === '1-step') {\n                showSurvey();\n            }\n        }, 400);\n    }\n\n    _setupActiveTriggerTracking() {\n        const throttle = (func: any, limit: any) => {\n            let inThrottle: any;\n            return function () {\n                const args = arguments;\n                // @ts-ignore\n                const context = this;\n                if (!inThrottle) {\n                    func.apply(context, args);\n                    inThrottle = true;\n                    setTimeout(() => (inThrottle = false), limit);\n                }\n            };\n        };\n\n        const checkScrollDepth = throttle(() => {\n            if (!this._canTrackScrollDepthAgain) return;\n\n            const scrollDepth =\n                (window.scrollY /\n                    (document.documentElement.scrollHeight -\n                        window.innerHeight)) *\n                100;\n\n            this._activeTriggers.forEach((trigger) => {\n                if (\n                    trigger.scroll_depth &&\n                    scrollDepth >= trigger.scroll_depth\n                ) {\n                    this._canTrackScrollDepthAgain = false;\n                    this._performTrigger(null, trigger.unique_identifier);\n                }\n            });\n        }, 200);\n\n        if (this._activeTriggers?.some((t) => t.scroll_depth !== null)) {\n            window.addEventListener('scroll', checkScrollDepth);\n        }\n\n        const checkElementInteraction = (event: any) => {\n            this._activeTriggers?.forEach((trigger) => {\n                // Handle non-scroll triggers\n                const targetElement = event.target;\n                if (\n                    trigger.css_selector &&\n                    targetElement.matches(trigger.css_selector)\n                ) {\n                    this._performTrigger(null, trigger.unique_identifier);\n                } else if (\n                    trigger.inner_text &&\n                    targetElement.innerText === trigger.inner_text\n                ) {\n                    this._performTrigger(null, trigger.unique_identifier);\n                }\n            });\n        };\n\n        if (\n            this._activeTriggers?.some(\n                (t) => t.unique_key || t.css_selector || t.inner_text,\n            )\n        ) {\n            document.body.addEventListener('click', checkElementInteraction);\n        }\n    }\n}\n\n// Initialize and export the SDK instance\nconst Qualli = new QualliSDK();\nexport default Qualli;\n","import {SurveyThemePopupRoundedCorners} from '../types/index';\n\nconst mapPopupBorderRadiusToPx = (\n    borderRadius: SurveyThemePopupRoundedCorners,\n): number => {\n    switch (borderRadius) {\n        case SurveyThemePopupRoundedCorners.none:\n            return 0;\n        case SurveyThemePopupRoundedCorners.small:\n            return 10;\n        case SurveyThemePopupRoundedCorners.medium:\n            return 18;\n        case SurveyThemePopupRoundedCorners.large:\n            return 24;\n        default:\n            return 10; // default\n    }\n};\n\nexport default mapPopupBorderRadiusToPx;\n"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","_classCallCheck","instance","Constructor","TypeError","_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","String","Number","_defineProperties","target","props","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","_defineProperty","obj","module","exports","__esModule","require$$0","_regeneratorRuntime","n","hasOwnProperty","a","c","asyncIterator","u","toStringTag","define","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","h","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","__await","callInvokeWithMethodAndArg","Error","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","name","mark","setPrototypeOf","__proto__","awrap","async","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","runtime","regenerator","regeneratorRuntime","accidentalStrictMode","globalThis","Function","assign","source","api","init","converter","defaultAttributes","set","attributes","document","expires","Date","now","toUTCString","encodeURIComponent","replace","decodeURIComponent","escape","stringifiedAttributes","attributeName","split","cookie","write","get","cookies","jar","parts","join","found","read","remove","withAttributes","withConverter","freeze","path","urls","_logEvent","_logSurveyAction","_trackScreen","_performTrigger","_setUserAttributes","_identify","ApiRequest","_ref","_callee","apiKey","url","headers","body","deviceMetaData","options","response","jsonResponse","_context","_objectSpread","Authorization","concat","platform","JSON","stringify","event_metadata","fetch","ok","statusText","json","t0","console","message","_x","API_BASE_PATH","ApiManager","identify","userKey","userSessionKey","apiRequest","success","_x2","_x3","setUserAttributes","_callee2","_context2","timestamp","_x4","_x5","_x6","performTrigger","_callee3","trigger","_url","_context3","unique_id","_x7","_x8","_x9","_x10","trackScreen","_callee4","screen","_context4","_x11","_x12","_x13","logSurveyAction","_callee5","uniqueId","action","data","_context5","_x14","_x15","_x16","_x17","_x18","logEvent","_callee6","_context6","event_name","_x19","_x20","_x21","PopupStyles","screens","large","position","width","height","bottom","border","opacity","transition","small","left","right","popupPlacement","center","transform","person","base","cursor","background","overflow","circle","rectangle","bottom_left","bottom_center","bottom_right","SurveyThemePopupRoundedCorners","SurveyEvents","EventEmitter","event","listener","_this","events","off","filter","l","_len","Array","_key","eventEmitterInstance","QualliSDK","iframe","getElementById","_popupId","contentWindow","postMessage","_handleIframeMessages","bind","_trackScreenChange2","_performTrigger3","_setAttributes","_performTrigger2","_checkQueueAfterInit2","_init","_apiKey","ready","trackScreens","_trackScreens","_trackScreenChange","_setupScreenTracking","_checkQueueAfterInit","Cookies","app_user_key","session_key","_userSessionKey","_userKey","company","company_info","_activeTriggers","triggers","_setupActiveTriggerTracking","_this2","_attributesQueue","all","map","setAttributes","_triggerQueue","_ref2","_callee7","_args7","_context7","_this3","_popupInFrame","_closePopup","_surveyToComplete","_previousUrl","setTimeout","eventEmitter","on","_this4","originalPushState","history","pushState","originalReplaceState","replaceState","_len2","_key2","window","addEventListener","_callee8","_res","res","_res2","surveys","_surveys$","_res3","_context8","location","href","delay","_handleSurveyDelay","_showPopup","_callee9","fulllURL","_res$data","_surveys$2","_res$data2","_context9","_canTrackScrollDepthAgain","survey","islarge","innerWidth","createElement","queryParams","survey_id","unique_identifier","popup","queryParmasString","placement","popup_placement","borderRadius","none","medium","mapPopupBorderRadiusToPx","theme","popup_rounded_corners","borderWidth","popup_border_width","popupPlacementHorizontalStyles","popupStyles","borderColor","backgroundColor","background_color","zIndex","style","src","id","appendChild","video_url","_addPerson","logic","_emitSurvetShown","_this$_surveyToComple","emit","SURVEY_SHOWN","survey_unique_identifier","_this5","delayInSeconds","delayedTime","setSeconds","getSeconds","interval","setInterval","clearInterval","_event$data","_this$company","_this$_surveyToComple2","_postMessage","companyPlan","plan","SURVEY_COMPLETED","answers","_resizePopup","_iframe$style","totalHeight","regex","RegExp","test","parseInt","_this$_surveyToComple3","removeEventListener","SURVEY_CLOSED","_personId","showSurvey","isLarge","personContainer","personVideo","loop","muted","autoplay","playsInline","personPositioningStyles","personTypeStyles","personBaseStyles","screenPositioningStyles","border_width","border_color","objectFit","onclick","_this$_activeTriggers","_this$_activeTriggers2","func","limit","inThrottle","_this6","checkScrollDepth","scrollDepth","scrollY","documentElement","scrollHeight","innerHeight","scroll_depth","context","some","unique_key","css_selector","inner_text","_this6$_activeTrigger","targetElement","matches","innerText"],"mappings":"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"}